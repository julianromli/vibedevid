# Plan: Improve Mobile Navbar Symmetry and Cleanliness

## Context

Based on the screenshot and codebase analysis, the mobile navbar (line 312-396 in `components/ui/navbar.tsx`) currently has alignment issues. The right side contains multiple elements (Language Switcher, Theme Toggle, Sign In button/User Avatar, Menu Toggle) that create visual imbalance and crowding.

## Current Issues

1. **Asymmetry**: Logo on left vs 4+ controls on right creates visual weight imbalance
2. **Crowding**: Multiple buttons (LanguageSwitcher, ThemeToggle, Auth button, MenuToggle) cramped in small space
3. **Hit targets**: May not meet 44px minimum for mobile touch targets
4. **Spacing**: Inconsistent gaps between controls

## Proposed Solution

Apply Web Interface Guidelines principles to create a clean, symmetric mobile navbar:

### Phase 1: Simplify Mobile Controls

**Move non-critical controls to mobile menu:**
- LanguageSwitcher → Move inside mobile menu (bottom section)
- ThemeToggle → Move inside mobile menu (bottom section)
- Keep only: Logo (left) + Auth control + Menu toggle (right)

**Rationale:**
- Language and theme changes are infrequent actions
- Primary mobile actions: Authentication and Navigation
- Reduces visual noise, improves symmetry

### Phase 2: Improve Layout & Spacing

**Update mobile section (lines 311-396):**

```tsx
{/* Mobile Right Controls */}
<div className="flex items-center justify-end gap-3">
  {/* Auth Button/Avatar - min 44px touch target */}
  {!userIsLoggedIn ? (
    <Button
      onClick={handleSignIn}
      size="sm"
      className="h-11 min-w-[44px]" // Ensure 44px min touch target
    >
      {t('common.signIn')}
    </Button>
  ) : (
    <DropdownMenu>
      <DropdownMenuTrigger asChild>
        <Button
          variant="ghost"
          size="icon"
          className="h-11 w-11 rounded-full" // 44px touch target
        >
          <UserAvatar user={safeUser} size="md" />
        </Button>
      </DropdownMenuTrigger>
      {/* Keep existing dropdown content */}
    </DropdownMenu>
  )}
  
  {/* Menu Toggle - only show with navigation */}
  {showNavigation && (
    <Button
      className="relative z-50 h-11 w-11" // 44px touch target
      onClick={() => setOpen(!open)}
      size="icon"
      variant="ghost"
    >
      <MenuToggleIcon className="size-6" duration={300} open={open} />
    </Button>
  )}
</div>
```

### Phase 3: Update Mobile Menu

**Add Language & Theme controls to mobile menu (lines 403-510):**

Add new section after navigation links but before auth section:

```tsx
{/* Mobile Menu Settings Section */}
<div className="flex flex-col gap-3 border-t pt-4">
  <div className="flex items-center justify-between px-4">
    <span className="text-sm font-medium">{t('settings.language')}</span>
    <LanguageSwitcher />
  </div>
  <div className="flex items-center justify-between px-4">
    <span className="text-sm font-medium">{t('settings.theme')}</span>
    <ThemeToggle />
  </div>
</div>
```

### Phase 4: Visual Polish

**Apply Web Interface Guidelines:**

1. **Touch targets**: All mobile buttons minimum 44px (`h-11 w-11` = 44px)
2. **Spacing**: Consistent `gap-3` (12px) between controls
3. **Alignment**: Grid layout ensures logo left, controls right balance
4. **Contrast**: Ensure buttons meet WCAG contrast on scroll state
5. **Hit areas**: No dead zones - full button areas clickable

## Files to Modify

- `components/ui/navbar.tsx` (lines 311-510)
  - Simplify mobile controls section (lines 311-396)
  - Add settings section to mobile menu (lines 403-510)

## Translation Keys Needed

Add to `messages/en.json` and `messages/id.json`:

```json
{
  "settings": {
    "language": "Language",
    "theme": "Theme"
  }
}
```

## Verification Steps

1. **Visual Test:**
   - Run `bun dev`
   - Open http://localhost:3000 in mobile view (375px width)
   - Check navbar symmetry (logo left, 2 controls right)
   - Open mobile menu → verify Language & Theme controls present

2. **Touch Target Test:**
   - Use browser DevTools mobile emulation
   - Verify all buttons ≥44px in both dimensions
   - Test tap areas don't overlap

3. **Scrolled State Test:**
   - Scroll down page
   - Verify navbar animation smooth
   - Check backdrop blur and border appear correctly

4. **Cross-Browser Test:**
   - Test in Safari iOS (if available)
   - Test in Chrome Android emulation

5. **Build Test:**
   - Run `bun build` to ensure no TypeScript errors
   - Run `bun tsc --noEmit` for strict type checking

## Expected Outcome

- **Symmetric navbar**: Balanced visual weight (logo ↔ 2 controls)
- **Clean layout**: No crowding, generous spacing
- **Accessible**: All touch targets ≥44px
- **Better UX**: Frequently used actions (auth, nav) prominent; settings tucked in menu
- **Maintains functionality**: All features accessible, just reorganized

## Risks & Mitigations

**Risk**: Users expect language/theme in main navbar
**Mitigation**: These are infrequent actions; mobile menu is one tap away

**Risk**: Translation keys missing
**Mitigation**: Provide exact JSON structure for both locales

**Risk**: Mobile menu becomes too long
**Mitigation**: Settings section compact (2 rows), positioned between nav and auth
